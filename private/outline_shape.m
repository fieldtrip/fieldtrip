function outline = outline_shape(layout, method)

% helper function for ft_prepare_layout and ft_plot_topo to create an
% outline (to-be-plotted), or a mask (to use as extrapolation boundary).
% The input is either a layout structure, or an Nx2 matrix with point
% positions.

switch method
  case 'circle'
    % generate an outline consisting of a unit-diameter circle
    
    % create the default "circle with triangle" to resemble the head
    % note that the electrode positions should be scaled accordingly
    rmax  = 0.5;
    l     = 0:2*pi/100:2*pi;
    HeadX = cos(l).*rmax;
    HeadY = sin(l).*rmax;
    NoseX = [0.18*rmax 0 -0.18*rmax];
    NoseY = [rmax-.004 rmax*1.15 rmax-.004];
    EarX  = [.497 .510 .518 .5299 .5419 .54 .547 .532 .510 .489];
    EarY  = [.0555 .0775 .0783 .0746 .0555 -.0055 -.0932 -.1313 -.1384 -.1199];
    % Define the outline of the head, ears and nose
    outline{1} = [HeadX(:) HeadY(:)];
    outline{2} = [NoseX(:) NoseY(:)];
    outline{3} = [ EarX(:)  EarY(:)];
    outline{4} = [-EarX(:)  EarY(:)];

  case 'doublecirclecross'
    % generate an outline consisting of a unit-diameter circle
    
    % create a double circle with a cross over the vertex
    % note that the electrode positions should be scaled accordingly
    rmax  = 0.5;
    l     = 0:2*pi/100:2*pi;
    HeadX = cos(l).*rmax;
    HeadY = sin(l).*rmax;
    NoseX = [0.18*rmax 0 -0.18*rmax];
    NoseY = [rmax-.004 rmax*1.15 rmax-.004];
    % Define the outline of the head with the cross
    outline{1} = [HeadX(:) HeadY(:)]*1.0; % outer circle
    outline{2} = [HeadX(:) HeadY(:)]*0.8; % inner circle
    outline{3} = [NoseX(:) NoseY(:)];     % nose
    outline{4} = [-0.5 0 ; +0.5 0];       % horizontal line
    outline{5} = [0 -0.5 ; 0 +0.5];       % vertical line

  case 'helmet'
    % generate an outline consisting of default helmet

    % this is taken from the layout for the FieldLine helmet, which in turn is taken from the CTF helmet
    outline{1} = 5.5*[0.00331272465437779 0.470471964285714;-0.0120810253456222 0.470149464285714;-0.0274522753456222 0.469208214285714;-0.0582135253456222 0.465743214285714;-0.0812047753456221 0.461854464285714;-0.0831247753456221 0.461430714285714;-0.0850110253456223 0.460924464285714;-0.0859335253456222 0.460628214285714;-0.0868447753456222 0.460301964285714;-0.0877372753456222 0.459938214285714;-0.116811025345622 0.445429464285714;-0.131826025345622 0.437190714285714;-0.158338525345622 0.420795714285714;-0.161852275345622 0.418335714285714;-0.189647275345622 0.394980714285714;-0.212271025345622 0.373796964285714;-0.213921025345622 0.371974464285714;-0.214367275345622 0.371531964285714;-0.214588525345622 0.371329464285714;-0.214817275345622 0.371138214285714;-0.215046025345622 0.370965714285714;-0.215271025345622 0.370815714285714;-0.215383525345622 0.370748214285714;-0.215499775345622 0.370688214285714;-0.215627275345622 0.370628214285714;-0.215758525345622 0.370575714285714;-0.215889775345622 0.370534464285714;-0.216021025345622 0.370500714285714;-0.216298525345622 0.370455714285714;-0.216437275345622 0.370444464285714;-0.216579775345622 0.370436964285714;-0.216722275345622 0.370440714285714;-0.216864775345622 0.370448214285714;-0.217011025345622 0.370459464285714;-0.217303525345622 0.370500714285714;-0.217453525345622 0.370526964285714;-0.218057275345622 0.370673214285714;-0.265164775345622 0.384394464285714;-0.265629775345622 0.384488214285714;-0.266091025345622 0.384551964285714;-0.266544775345622 0.384589464285714;-0.266994775345622 0.384604464285714;-0.267441025345622 0.384596964285714;-0.268333525345622 0.384533214285714;-0.269233525345622 0.384405714285714;-0.307813525345622 0.377423214285714;-0.308031025345622 0.377363214285714;-0.308244775345622 0.377295714285714;-0.308451025345622 0.377216964285714;-0.308646025345622 0.377130714285714;-0.308837275345622 0.377036964285714;-0.309021025345622 0.376935714285714;-0.309197275345622 0.376819464285714;-0.309534775345622 0.376571964285714;-0.309853525345622 0.376298214285714;-0.310157275345622 0.376001964285714;-0.310303525345622 0.375844464285714;-0.310581025345622 0.375518214285714;-0.311113525345622 0.374820714285714;-0.312144775345622 0.373343214285714;-0.342174775345622 0.336293214285714;-0.356443525345622 0.316718214285714;-0.374994775345622 0.288619464285714;-0.392019775345622 0.259568214285714;-0.407477275345622 0.229654464285714;-0.421326025345622 0.198911964285714;-0.433442275345622 0.167404464285714;-0.443769775345622 0.135259464285714;-0.452244775345622 0.102585714285714;-0.459924775345622 0.0629069642857141;-0.464323525345622 0.0290219642857141;-0.465594775345622 0.012424464285714;-0.465681025345622 -0.00410928571428595;-0.464867275345622 -0.0206917857142859;-0.463476025345622 -0.037146785714286;-0.459418525345622 -0.069794285714286;-0.456302275345622 -0.087348035714286;-0.452556025345622 -0.104770535714286;-0.448172275345622 -0.122031785714286;-0.443169775345622 -0.139120535714286;-0.437548525345622 -0.156010535714286;-0.431312275345622 -0.172675535714286;-0.424483525345622 -0.189108035714286;-0.417054775345622 -0.205281785714286;-0.409041025345622 -0.221174285714286;-0.400449775345622 -0.236763035714286;-0.391288525345622 -0.252033035714286;-0.381561025345622 -0.266961785714286;-0.371278525345622 -0.281530535714286;-0.360444775345622 -0.295716785714286;-0.349074775345622 -0.309501785714286;-0.337194775345622 -0.322836785714286;-0.324827275345622 -0.335710535714286;-0.311991025345622 -0.348100535714286;-0.298712275345622 -0.359991785714286;-0.284994775345622 -0.371373035714286;-0.270864775345622 -0.382233035714286;-0.256344775345622 -0.392545535714286;-0.241453525345622 -0.402310535714286;-0.226194775345622 -0.411501785714286;-0.210602275345622 -0.420108035714286;-0.194687275345622 -0.428114285714286;-0.178472275345622 -0.435505535714286;-0.161968525345622 -0.442270535714286;-0.145206025345622 -0.448390535714286;-0.128184775345622 -0.453854285714286;-0.112352275345622 -0.458279285714286;-0.0830835253456223 -0.464856785714286;-0.0534360253456222 -0.469495535714286;-0.0235410253456222 -0.472191785714286;0.00647397465437775 -0.472960535714286;0.0364739746543777 -0.471783035714286;0.0663277246543778 -0.468674285714286;0.0959039746543778 -0.463630535714286;0.110543974654378 -0.460386785714286;0.126466474654378 -0.456265535714286;0.143588974654378 -0.451131785714286;0.160478974654378 -0.445330535714286;0.177113974654378 -0.438880535714286;0.193475224654378 -0.431789285714286;0.209547724654378 -0.424075535714286;0.225308974654378 -0.415761785714286;0.240743974654378 -0.406844285714286;0.255826474654378 -0.397353035714286;0.270545224654378 -0.387299285714286;0.284873974654378 -0.376698035714286;0.298801474654378 -0.365556785714286;0.312305224654378 -0.353898035714286;0.325366474654378 -0.341733035714286;0.337970224654378 -0.329080535714286;0.350090224654378 -0.315948035714286;0.361715224654378 -0.302354285714286;0.372811474654378 -0.288336785714286;0.383363974654378 -0.273929285714286;0.393368974654378 -0.259146785714286;0.402811474654378 -0.244015535714286;0.411687724654378 -0.228550535714286;0.419990224654378 -0.212781785714286;0.427707724654378 -0.196713035714286;0.434832724654378 -0.180378035714286;0.441361474654378 -0.163791785714286;0.447278974654378 -0.146980535714286;0.452585224654378 -0.129951785714286;0.457265224654378 -0.112739285714286;0.461315224654378 -0.0953542857142859;0.464723974654378 -0.0778230357142859;0.468863974654378 -0.0491730357142859;0.471601474654378 -0.0151492857142859;0.472032724654378 0.00191321428571403;0.471773974654378 0.0188857142857141;0.470588974654378 0.035306964285714;0.468515224654378 0.051728214285714;0.462372724654378 0.086348214285714;0.454790224654378 0.119269464285714;0.445351474654378 0.151706964285714;0.434105224654378 0.183563214285714;0.421096474654378 0.214721964285714;0.406433974654378 0.245018214285714;0.390158974654378 0.274478214285714;0.372342724654378 0.303038214285714;0.344903974654378 0.341509464285714;0.325103974654378 0.366308214285714;0.316085224654378 0.376808214285714;0.315886474654378 0.376939464285714;0.315672724654378 0.377063214285714;0.315455224654378 0.377179464285714;0.314986474654378 0.377385714285714;0.314742724654378 0.377479464285714;0.314228974654378 0.377644464285714;0.313688974654378 0.377790714285714;0.312552724654378 0.378023214285714;0.308015224654378 0.378596964285714;0.276117724654378 0.384480714285714;0.275056474654378 0.384630714285714;0.274535224654378 0.384679464285714;0.274017724654378 0.384701964285714;0.273511474654378 0.384701964285714;0.273260224654378 0.384694464285714;0.272765224654378 0.384649464285714;0.272363974654378 0.384593214285714;0.271745224654378 0.384461964285714;0.271122724654378 0.384304464285714;0.227900224654378 0.371670714285714;0.225391474654378 0.370733214285714;0.224716474654378 0.370511964285714;0.224390224654378 0.370421964285714;0.224071474654378 0.370350714285714;0.223767724654378 0.370298214285714;0.223621474654378 0.370279464285714;0.223478974654378 0.370268214285714;0.223340224654378 0.370264464285714;0.223208974654378 0.370264464285714;0.223081474654378 0.370275714285714;0.222968974654378 0.370290714285714;0.222852724654378 0.370320714285714;0.222740224654378 0.370354464285714;0.222623974654378 0.370399464285714;0.222507724654378 0.370451964285714;0.222391474654378 0.370511964285714;0.222155224654378 0.370654464285714;0.221922724654378 0.370823214285714;0.221686474654378 0.371010714285714;0.221221474654378 0.371434464285714;0.219541474654378 0.373193214285714;0.198893974654378 0.392655714285714;0.168526474654378 0.418298214285714;0.164982724654378 0.420788214285714;0.144886474654378 0.433380714285714;0.129991474654378 0.441968214285714;0.0952664746543777 0.459514464285714;0.0934402246543777 0.460238214285714;0.0915877246543778 0.460838214285714;0.0897052246543778 0.461340714285714;0.0743714746543778 0.464258214285714;0.0523402246543778 0.467351964285714;0.0215677246543778 0.470044464285714;0.00331272465437779 0.470471964285714];
    outline{2} = 5.5*[4.5166850393727e-05 0.453549861023622;0.00402785185039376 0.453413916023622;0.00800550185039377 0.453190256023622;0.0119725518503937 0.452875701023622;0.0159268818503938 0.452475551023622;0.0198708768503937 0.451986626023622;0.0237992368503938 0.451413166023622;0.0277172618503938 0.450753316023622;0.0316249518503938 0.450008136023622;0.0355172718503938 0.449181071023622;0.0393989918503938 0.448270001023622;0.0432653418503938 0.447277576023622;0.0471160568503938 0.446203266023622;0.0509540518503938 0.445047866023622;0.0547764118503937 0.443813231023622;0.0585857868503937 0.442499891023622;0.0623795268503937 0.441108641023622;0.0661578968503938 0.439640011023622;0.0699206318503938 0.438094796023622;0.0736677318503938 0.436472996023622;0.0773941618503938 0.434778056023622;0.0811078718503938 0.433007591023622;0.0848032968503938 0.431166106023622;0.0884807018503938 0.429249891023622;0.0921400868503938 0.427262126023622;0.0957811868503937 0.425204401023622;0.0994042668503938 0.423075656023622;0.103009061850394 0.420878276023622;0.106593451850394 0.418612526023622;0.110156906850394 0.416279201023622;0.113702341850394 0.413878831023622;0.117227106850394 0.411412211023622;0.120730936850394 0.408880931023622;0.124214361850394 0.406284991023622;0.127676851850394 0.403624391023622;0.131118936850394 0.400903106023622;0.134537436850394 0.398119546023622;0.137935266850394 0.395272386023622;0.141307391850394 0.392367456023622;0.144658581850394 0.389401046023622;0.147986451850394 0.386376866023622;0.151288616850394 0.383294386023622;0.154570111850394 0.380156256023622;0.157825636850394 0.376960091023622;0.161055191850394 0.373709071023622;0.164264341850394 0.370402931023622;0.167442221850394 0.367040876023622;0.170599431850394 0.363628471023622;0.173730671850394 0.360162801023622;0.176831171850394 0.356646781023622;0.179908086850394 0.353079086023622;0.182959296850394 0.349460776023622;0.185981886850394 0.345794766023622;0.188976121850394 0.342079201023622;0.191944386850394 0.338316201023622;0.194881646850394 0.334507886023622;0.197792936850394 0.330652666023622;0.200673221850394 0.326752396023622;0.203525151850394 0.322808136023622;0.206348461850394 0.318819886023622;0.209138381850394 0.314788706023622;0.211902066850394 0.310717246023622;0.214635011850394 0.306603651023622;0.217334036850394 0.302449511023622;0.220002056850394 0.298255621023622;0.222641721850394 0.294023836023622;0.225245081850394 0.289754686023622;0.227820086850394 0.285448171023622;0.230361436850394 0.281105086023622;0.232868866850394 0.276727551023622;0.235342906850394 0.272314506023622;0.237785941850394 0.267866746023622;0.240192671850394 0.263387716023622;0.242563096850394 0.258875561023622;0.244902781850394 0.254332136023622;0.247205896850394 0.249757441023622;0.249472971850394 0.245153066023622;0.251706126850394 0.240521661023622;0.253903241850394 0.235860311023622;0.256061666850394 0.231171931023622;0.258186436850394 0.226456256023622;0.260274636850394 0.221714876023622;0.262324411850394 0.216951501023622;0.264335231850394 0.212161891023622;0.266309746850394 0.207347901023622;0.268245571850394 0.202513241023622;0.270139791850394 0.197655261023622;0.271997971850394 0.192776876023622;0.273817196850394 0.187878616023622;0.275595081850394 0.182959951023622;0.277334011850394 0.178024326023622;0.279034251850394 0.173070416023622;0.280693151850394 0.168099811023622;0.282310711850394 0.163112511023622;0.283886666850394 0.158109576023622;0.285418631850394 0.153093656023622;0.286911906850394 0.148062631023622;0.288363576850394 0.143019681023622;0.289771521850394 0.137964806023622;0.291132561850394 0.132898536023622;0.292454911850394 0.127821931023622;0.293733271850394 0.122733666023622;0.294967641850394 0.117638776023622;0.296158286850394 0.112534876023622;0.297302026850394 0.107424616023622;0.298401776850394 0.102306671023622;0.299455151850394 0.0971821010236217;0.300464536850394 0.0920548810236217;0.301427016850394 0.0869226260236217;0.302343121850394 0.0817877210236217;0.303212851850394 0.0766501660236217;0.304035676850394 0.0715112860236218;0.304812126850394 0.0663713460236217;0.305541936850394 0.0612311410236217;0.306219806850394 0.0560935860236217;0.306851301850394 0.0509565610236217;0.307436156850394 0.0458216560236218;0.307969336850394 0.0406891360236217;0.308455876850394 0.0355608560236217;0.308890476850394 0.0304376110236217;0.309276316850394 0.0253194010236217;0.309609951850394 0.0202104660236217;0.309894561850394 0.0151052410236217;0.310127496850394 0.0100106160236218;0.310311406850394 0.00492341102362175;0.310443376850394 -0.000153193976378283;0.310521021850394 -0.00521946397637828;0.310546726850394 -0.0102743389763783;0.310521021850394 -0.0153029789763782;0.310443376850394 -0.0202905439763783;0.310311406850394 -0.0252338539763782;0.310127496850394 -0.0301355589763783;0.309894561850394 -0.0349961889763783;0.309609951850394 -0.0398178639763782;0.309276316850394 -0.0445931639763783;0.308890476850394 -0.0493295089763783;0.308455876850394 -0.0540215989763783;0.307969336850394 -0.0586776489763783;0.307436156850394 -0.0632873239763783;0.306851301850394 -0.0678580439763783;0.306219806850394 -0.0723845089763782;0.305541936850394 -0.0768698989763782;0.304812126850394 -0.0813136839763783;0.304035676850394 -0.0857190439763783;0.303212851850394 -0.0900822689763783;0.302343121850394 -0.0944020339763783;0.301427016850394 -0.0986804589763782;0.300464536850394 -0.102922313976378;0.299455151850394 -0.107120178976378;0.298401776850394 -0.111276703976378;0.297302026850394 -0.115389503976378;0.296158286850394 -0.119465468976378;0.294967641850394 -0.123495588976378;0.293733271850394 -0.127488873976378;0.292454911850394 -0.131438433976378;0.291132561850394 -0.135351688976378;0.289771521850394 -0.139221218976378;0.288363576850394 -0.143048878976378;0.286911906850394 -0.146838113976378;0.285418631850394 -0.150583093976378;0.283886666850394 -0.154292033976378;0.282310711850394 -0.157956718976378;0.280693151850394 -0.161577413976378;0.279034251850394 -0.165164718976378;0.277334011850394 -0.168707768976378;0.275595081850394 -0.172212393976378;0.273817196850394 -0.175675148976378;0.271997971850394 -0.179096563976378;0.270139791850394 -0.182479288976378;0.268245571850394 -0.185820938976378;0.266309746850394 -0.189123368976378;0.264335231850394 -0.192384193976378;0.262324411850394 -0.195606328976378;0.260274636850394 -0.198787388976378;0.258186436850394 -0.201926843976378;0.256061666850394 -0.205027343976378;0.253903241850394 -0.208086503976378;0.251706126850394 -0.211109623976378;0.249472971850394 -0.214088488976378;0.247205896850394 -0.217028663976378;0.244902781850394 -0.219927498976378;0.242563096850394 -0.222790028976378;0.240192671850394 -0.225610953976378;0.237785941850394 -0.228393188976378;0.235342906850394 -0.231131433976378;0.232868866850394 -0.233833638976378;0.230361436850394 -0.236494238976378;0.227820086850394 -0.239115883976378;0.225245081850394 -0.241698838976378;0.222641721850394 -0.244243103976378;0.220002056850394 -0.246745763976378;0.217334036850394 -0.249209733976378;0.214635011850394 -0.251635013976378;0.211902066850394 -0.254021338976378;0.209138381850394 -0.256366058976378;0.206348461850394 -0.258674473976378;0.203525151850394 -0.260941813976378;0.200673221850394 -0.263167548976378;0.197792936850394 -0.265357243976378;0.194881646850394 -0.267505333976378;0.191944386850394 -0.269614733976378;0.188976121850394 -0.271687828976378;0.185981886850394 -0.273719583976378;0.182959296850394 -0.275712383976378;0.179908086850394 -0.277666493976378;0.176831171850394 -0.279581648976378;0.173730671850394 -0.281455463976378;0.170599431850394 -0.283295888976378;0.167442221850394 -0.285094708976378;0.164264341850394 -0.286854308976378;0.161055191850394 -0.288575483976378;0.157825636850394 -0.290260618976378;0.154570111850394 -0.291903883976378;0.151288616850394 -0.293508723976378;0.147986451850394 -0.295074343976378;0.144658581850394 -0.296601538976378;0.141307391850394 -0.298092163976378;0.137935266850394 -0.299544098976378;0.134537436850394 -0.300957343976378;0.131118936850394 -0.302331633976378;0.127676851850394 -0.303667233976378;0.124214361850394 -0.304963613976378;0.120730936850394 -0.306221568976378;0.117227106850394 -0.307443218976378;0.113702341850394 -0.308626178976378;0.110156906850394 -0.309772568976378;0.106593451850394 -0.310880268976378;0.103009061850394 -0.311946628976378;0.0994042668503938 -0.312976683976378;0.0957811868503937 -0.313970698976378;0.0921400868503938 -0.314922843976378;0.0884807018503938 -0.315841598976378;0.0848032968503938 -0.316721928976378;0.0811078718503938 -0.317560388976378;0.0773941618503938 -0.318365193976378;0.0736677318503938 -0.319128923976378;0.0699206318503938 -0.319861118976378;0.0661578968503938 -0.320549588976378;0.0623795268503937 -0.321199103976378;0.0585857868503937 -0.321815228976378;0.0547764118503937 -0.322389748976378;0.0509540518503938 -0.322930613976378;0.0471160568503938 -0.323432788976378;0.0432653418503938 -0.323898658976378;0.0393989918503938 -0.324325573976378;0.0355172718503938 -0.324714063976378;0.0316249518503938 -0.325065983976378;0.0277172618503938 -0.325381598976378;0.0237992368503938 -0.325661173976378;0.0198708768503937 -0.325899408976378;0.0159268818503938 -0.326103723976378;0.0119725518503937 -0.326269348976378;0.00800550185039377 -0.326401318976378;0.00402785185039376 -0.326494598976378;4.5166850393727e-05 -0.326548923976378;0.00070501685039379 -0.326548923976378;-0.00328270314960626 -0.326494598976378;-0.00725902814960622 -0.326401318976378;-0.0112250181496062 -0.326269348976378;-0.0151806731496063 -0.326103723976378;-0.0191233431496062 -0.325899408976378;-0.0230543531496062 -0.325661173976378;-0.0269723781496062 -0.325381598976378;-0.0308774181496062 -0.325065983976378;-0.0347707981496062 -0.324714063976378;-0.0386514581496063 -0.324325573976378;-0.0425178081496063 -0.323898658976378;-0.0463698481496062 -0.323432788976378;-0.0502075781496062 -0.322930613976378;-0.0540312631496062 -0.322389748976378;-0.0578406381496062 -0.321815228976378;-0.0616343781496062 -0.321199103976378;-0.0654127481496063 -0.320549588976378;-0.0691744231496063 -0.319861118976378;-0.0729199331496063 -0.319128923976378;-0.0766492781496062 -0.318365193976378;-0.0803613981496062 -0.317560388976378;-0.0840570881496062 -0.316721928976378;-0.0877344931496062 -0.315841598976378;-0.0913936131496062 -0.314922843976378;-0.0950349781496062 -0.313970698976378;-0.0986577931496063 -0.312976683976378;-0.102261528149606 -0.311946628976378;-0.105846978149606 -0.310880268976378;-0.109411758149606 -0.309772568976378;-0.112957193149606 -0.308626178976378;-0.116481958149606 -0.307443218976378;-0.119986053149606 -0.306221568976378;-0.123469213149606 -0.304963613976378;-0.126931968149606 -0.303667233976378;-0.130372463149606 -0.302331633976378;-0.133791228149606 -0.300957343976378;-0.137187733149606 -0.299544098976378;-0.140560918149606 -0.298092163976378;-0.143912373149606 -0.296601538976378;-0.147239978149606 -0.295074343976378;-0.150543468149606 -0.293508723976378;-0.153823638149606 -0.291903883976378;-0.157079163149606 -0.290260618976378;-0.160310308149606 -0.288575483976378;-0.163516543149606 -0.286854308976378;-0.166697073149606 -0.285094708976378;-0.169852958149606 -0.283295888976378;-0.172983138149606 -0.281455463976378;-0.176086023149606 -0.279581648976378;-0.179161613149606 -0.277666493976378;-0.182211498149606 -0.275712383976378;-0.185234088149606 -0.273719583976378;-0.188229648149606 -0.271687828976378;-0.191196588149606 -0.269614733976378;-0.194135173149606 -0.267505333976378;-0.197045403149606 -0.265357243976378;-0.199927013149606 -0.263167548976378;-0.202778943149606 -0.260941813976378;-0.205600928149606 -0.258674473976378;-0.208393233149606 -0.256366058976378;-0.211155858149606 -0.254021338976378;-0.213887213149606 -0.251635013976378;-0.216587828149606 -0.249209733976378;-0.219256908149606 -0.246745763976378;-0.221895248149606 -0.244243103976378;-0.224499933149606 -0.241698838976378;-0.227073613149606 -0.239115883976378;-0.229614963149606 -0.236494238976378;-0.232122658149606 -0.233833638976378;-0.234598023149606 -0.231131433976378;-0.237038408149606 -0.228393188976378;-0.239446463149606 -0.225610953976378;-0.241818213149606 -0.222790028976378;-0.244156308149606 -0.219927498976378;-0.246459688149606 -0.217028663976378;-0.248727823149606 -0.214088488976378;-0.250959918149606 -0.211109623976378;-0.253157033149606 -0.208086503976378;-0.255316518149606 -0.205027343976378;-0.257439963149606 -0.201926843976378;-0.259527103149606 -0.198787388976378;-0.261576613149606 -0.195606328976378;-0.263588758149606 -0.192384193976378;-0.265561948149606 -0.189123368976378;-0.267497773149606 -0.185820938976378;-0.269394643149606 -0.182479288976378;-0.271252823149606 -0.179096563976378;-0.273070723149606 -0.175675148976378;-0.274849933149606 -0.172212393976378;-0.276589128149606 -0.168707768976378;-0.278288043149606 -0.165164718976378;-0.279946943149606 -0.161577413976378;-0.281564238149606 -0.157956718976378;-0.283140193149606 -0.154292033976378;-0.284673748149606 -0.150583093976378;-0.286165698149606 -0.146838113976378;-0.287616043149606 -0.143048878976378;-0.289023988149606 -0.139221218976378;-0.290387678149606 -0.135351688976378;-0.291708438149606 -0.131438433976378;-0.292987063149606 -0.127488873976378;-0.294221433149606 -0.123495588976378;-0.295410488149606 -0.119465468976378;-0.296555553149606 -0.115389503976378;-0.297655568149606 -0.111276703976378;-0.298708678149606 -0.107120178976378;-0.299718063149606 -0.102922313976378;-0.300680808149606 -0.0986804589763782;-0.301598238149606 -0.0944020339763783;-0.302467703149606 -0.0900822689763783;-0.303290793149606 -0.0857190439763783;-0.304065653149606 -0.0813136839763783;-0.304794138149606 -0.0768698989763782;-0.305474923149606 -0.0723845089763782;-0.306106418149606 -0.0678580439763783;-0.306689948149606 -0.0632873239763783;-0.307224188149606 -0.0586776489763783;-0.307708078149606 -0.0540215989763783;-0.308144268149606 -0.0493295089763783;-0.308529843149606 -0.0445931639763783;-0.308865068149606 -0.0398178639763782;-0.309148353149606 -0.0349961889763783;-0.309382613149606 -0.0301355589763783;-0.309564933149606 -0.0252338539763782;-0.309695578149606 -0.0202905439763783;-0.309774548149606 -0.0153029789763782;-0.309800518149606 -0.0102743389763783;-0.309774548149606 -0.00521946397637828;-0.309695578149606 -0.000153193976378283;-0.309564933149606 0.00492341102362175;-0.309382613149606 0.0100106160236218;-0.309148353149606 0.0151052410236217;-0.308865068149606 0.0202104660236217;-0.308529843149606 0.0253194010236217;-0.308144268149606 0.0304376110236217;-0.307708078149606 0.0355608560236217;-0.307224188149606 0.0406891360236217;-0.306689948149606 0.0458216560236218;-0.306106418149606 0.0509565610236217;-0.305474923149606 0.0560935860236217;-0.304794138149606 0.0612311410236217;-0.304065653149606 0.0663713460236217;-0.303290793149606 0.0715112860236218;-0.302467703149606 0.0766501660236217;-0.301598238149606 0.0817877210236217;-0.300680808149606 0.0869226260236217;-0.299718063149606 0.0920548810236217;-0.298708678149606 0.0971821010236217;-0.297655568149606 0.102306671023622;-0.296555553149606 0.107424616023622;-0.295410488149606 0.112534876023622;-0.294221433149606 0.117638776023622;-0.292987063149606 0.122733666023622;-0.291708438149606 0.127821931023622;-0.290387678149606 0.132898536023622;-0.289023988149606 0.137964806023622;-0.287616043149606 0.143019681023622;-0.286165698149606 0.148062631023622;-0.284673748149606 0.153093656023622;-0.283140193149606 0.158109576023622;-0.281564238149606 0.163112511023622;-0.279946943149606 0.168099811023622;-0.278288043149606 0.173070416023622;-0.276589128149606 0.178024326023622;-0.274849933149606 0.182959951023622;-0.273070723149606 0.187878616023622;-0.271252823149606 0.192776876023622;-0.269394643149606 0.197655261023622;-0.267497773149606 0.202513241023622;-0.265561948149606 0.207347901023622;-0.263588758149606 0.212161891023622;-0.261576613149606 0.216951501023622;-0.259527103149606 0.221714876023622;-0.257439963149606 0.226456256023622;-0.255316518149606 0.231171931023622;-0.253157033149606 0.235860311023622;-0.250959918149606 0.240521661023622;-0.248727823149606 0.245153066023622;-0.246459688149606 0.249757441023622;-0.244156308149606 0.254332136023622;-0.241818213149606 0.258875561023622;-0.239446463149606 0.263387716023622;-0.237038408149606 0.267866746023622;-0.234598023149606 0.272314506023622;-0.232122658149606 0.276727551023622;-0.229614963149606 0.281105086023622;-0.227073613149606 0.285448171023622;-0.224499933149606 0.289754686023622;-0.221895248149606 0.294023836023622;-0.219256908149606 0.298255621023622;-0.216587828149606 0.302449511023622;-0.213887213149606 0.306603651023622;-0.211155858149606 0.310717246023622;-0.208393233149606 0.314788706023622;-0.205600928149606 0.318819886023622;-0.202778943149606 0.322808136023622;-0.199927013149606 0.326752396023622;-0.197045403149606 0.330652666023622;-0.194135173149606 0.334507886023622;-0.191196588149606 0.338316201023622;-0.188229648149606 0.342079201023622;-0.185234088149606 0.345794766023622;-0.182211498149606 0.349460776023622;-0.179161613149606 0.353079086023622;-0.176086023149606 0.356646781023622;-0.172983138149606 0.360162801023622;-0.169852958149606 0.363628471023622;-0.166697073149606 0.367040876023622;-0.163516543149606 0.370402931023622;-0.160310308149606 0.373709071023622;-0.157079163149606 0.376960091023622;-0.153823638149606 0.380156256023622;-0.150543468149606 0.383294386023622;-0.147239978149606 0.386376866023622;-0.143912373149606 0.389401046023622;-0.140560918149606 0.392367456023622;-0.137187733149606 0.395272386023622;-0.133791228149606 0.398119546023622;-0.130372463149606 0.400903106023622;-0.126931968149606 0.403624391023622;-0.123469213149606 0.406284991023622;-0.119986053149606 0.408880931023622;-0.116481958149606 0.411412211023622;-0.112957193149606 0.413878831023622;-0.109411758149606 0.416279201023622;-0.105846978149606 0.418612526023622;-0.102261528149606 0.420878276023622;-0.0986577931496063 0.423075656023622;-0.0950349781496062 0.425204401023622;-0.0913936131496062 0.427262126023622;-0.0877344931496062 0.429249891023622;-0.0840570881496062 0.431166106023622;-0.0803613981496062 0.433007591023622;-0.0766492781496062 0.434778056023622;-0.0729199331496063 0.436472996023622;-0.0691744231496063 0.438094796023622;-0.0654127481496063 0.439640011023622;-0.0616343781496062 0.441108641023622;-0.0578406381496062 0.442499891023622;-0.0540312631496062 0.443813231023622;-0.0502075781496062 0.445047866023622;-0.0463698481496062 0.446203266023622;-0.0425178081496063 0.447277576023622;-0.0386514581496063 0.448270001023622;-0.0347707981496062 0.449181071023622;-0.0308774181496062 0.450008136023622;-0.0269723781496062 0.450753316023622;-0.0230543531496062 0.451413166023622;-0.0191233431496062 0.451986626023622;-0.0151806731496063 0.452475551023622;-0.0112250181496062 0.452875701023622;-0.00725902814960622 0.453190256023622;-0.00328270314960626 0.453413916023622;0.00070501685039379 0.453549861023622];
    outline{3} = 5.5*[-0.0518871481496062 0.444574046023622;-0.0503384881496063 0.446502186023622;-0.0487895631496062 0.448430591023622;-0.0472019481496062 0.450366416023622;-0.0456220181496062 0.452268586023622;-0.0440291031496063 0.454155386023622;-0.0424258531496062 0.456026816023622;-0.0407889481496063 0.457921301023622;-0.0391650281496062 0.459779481023622;-0.0375257381496062 0.461622291023622;-0.0358758481496062 0.463444431023622;-0.0342145631496062 0.465261006023622;-0.0325453281496062 0.467072811023622;-0.0308360781496062 0.468902901023622;-0.0291125181496062 0.470714441023622;-0.0274186381496063 0.472492591023622;-0.0256937531496062 0.474244771023622;-0.0239715181496062 0.475999336023622;-0.0222325881496062 0.477736146023622;-0.0204494031496062 0.479490976023622;-0.0186691331496062 0.481237856023622;-0.0168846231496063 0.482940746023622;-0.0151067381496062 0.484633566023622;-0.0133081831496062 0.486308101023622;-0.0107398031496062 0.488608831023622;-0.00906023314960622 0.489802126023622;-0.00681647814960622 0.491008141023622;-0.00452104814960624 0.491755971023622;-0.00226192314960626 0.492356726023622;1.41618503937522e-05 0.492656971023622;0.000733371850393752 0.492656971023622;0.0030081318503938 0.492356726023622;0.00526725685039378 0.491755971023622;0.00756295185039377 0.491008141023622;0.00980644185039375 0.489802126023622;0.0114860118503938 0.488608831023622;0.0140559818503938 0.486308101023622;0.0158518868503938 0.484633566023622;0.0176324218503938 0.482940746023622;0.0194153418503938 0.481237856023622;0.0211958768503937 0.479490976023622;0.0229787968503937 0.477736146023622;0.0247179918503938 0.475999336023622;0.0264415518503938 0.474244771023622;0.0281651118503937 0.472492591023622;0.0298574018503938 0.470714441023622;0.0315809618503938 0.468902901023622;0.0332915368503938 0.467072811023622;0.0349607718503937 0.465261006023622;0.0366223218503938 0.463444431023622;0.0382732718503937 0.461622291023622;0.0399115018503938 0.459779481023622;0.0415340968503938 0.457921301023622;0.0431723268503938 0.456026816023622;0.0447742518503938 0.454155386023622;0.0463682268503937 0.452268586023622;0.0479468318503938 0.450366416023622;0.0495357718503937 0.448430591023622;0.0510833718503938 0.446502186023622;0.0526336218503938 0.444574046023622];
    outline{4} = 5.5*[-0.304627188149606 0.0624077410236217;-0.305125388149606 0.0617839310236217;-0.306058453149606 0.0605803010236218;-0.307023583149606 0.0593032660236218;-0.308017333149606 0.0579546810236217;-0.309038378149606 0.0565390510236218;-0.310080093149606 0.0550598210236218;-0.311142213149606 0.0535196410236218;-0.312220233149606 0.0519216910236217;-0.313312298149606 0.0502691510236217;-0.314414698149606 0.0485649360236218;-0.315525048149606 0.0468127560236218;-0.316640433149606 0.0450165860236217;-0.317755553149606 0.0431777510236217;-0.318870938149606 0.0412999610236218;-0.319981288149606 0.0393885160236217;-0.321083688149606 0.0374447410236217;-0.322177078149606 0.0354715510236217;-0.323254833149606 0.0334721260236217;-0.324318543149606 0.0314507060236218;-0.325361583149606 0.0294099410236217;-0.326382363149606 0.0273538060236217;-0.327378763149606 0.0252844210236218;-0.328345218149606 0.0232062910236217;-0.329280933149606 0.0211225960236217;-0.330181403149606 0.0190338660236217;-0.331045833149606 0.0169456660236217;-0.331868658149606 0.0148619710236217;-0.332649083149606 0.0127835760236217;-0.333381278149606 0.0107157810236218;-0.334065773149606 0.0086607060236217;-0.334697268149606 0.00662126602362171;-0.335273113149606 0.00460117102362175;-0.335791983149606 0.00260439602362175;-0.336248843149606 0.000633591023621698;-0.336640778149606 -0.00130859397637823;-0.336965668149606 -0.0032187139763783;-0.337219273149606 -0.00509411897637826;-0.337400268149606 -0.00693030397637829;-0.337505208149606 -0.00872382397637825;-0.337529853149606 -0.0104733539763783;-0.337472878149606 -0.0121741239763782;-0.337330573149606 -0.0138224239763783;-0.337100288149606 -0.0154182539763783;-0.336778048149606 -0.0169541939763783;-0.336360143149606 -0.0184294489763782;-0.335847633149606 -0.0198397789763783;-0.335233098149606 -0.0211833289763783;-0.334514948149606 -0.0224563889763783;-0.333690533149606 -0.0236549839763783;-0.332757733149606 -0.0247754039763782;-0.331710983149606 -0.0258160589763783;-0.330548958149606 -0.0267735039763783;-0.329269273149606 -0.0276432339763782;-0.327869278149606 -0.0284249839763783;-0.326343673149606 -0.0291108039763783;-0.324689808149606 -0.0297006939763783;-0.322908213149606 -0.0301925339763783;-0.320991733149606 -0.0305810239763783;-0.318938248149606 -0.0308629839763782;-0.316746433149606 -0.0310339089763783;-0.314412048149606 -0.0310959189763783;-0.311931648149606 -0.0310389439763783;-0.309303643149606 -0.0308629839763782];
    outline{5} = 5.5*[0.305376311850394 0.0624064160236217;0.305873186850394 0.0617839310236217;0.306804661850394 0.0605803010236218;0.307770056850394 0.0593032660236218;0.308763806850394 0.0579546810236217;0.309785911850394 0.0565390510236218;0.310826301850394 0.0550598210236218;0.311887361850394 0.0535196410236218;0.312966441850394 0.0519216910236217;0.314058506850394 0.0502691510236217;0.315161171850394 0.0485649360236218;0.316271256850394 0.0468127560236218;0.317386641850394 0.0450165860236217;0.318502026850394 0.0431777510236217;0.319617411850394 0.0412999610236218;0.320727496850394 0.0393885160236217;0.321830161850394 0.0374447410236217;0.322922226850394 0.0354715510236217;0.324001306850394 0.0334721260236217;0.325065016850394 0.0314507060236218;0.326107791850394 0.0294099410236217;0.327130161850394 0.0273538060236217;0.328123911850394 0.0252844210236218;0.329091691850394 0.0232062910236217;0.330028466850394 0.0211225960236217;0.330928936850394 0.0190338660236217;0.331793366850394 0.0169456660236217;0.332616456850394 0.0148619710236217;0.333395291850394 0.0127835760236217;0.334127751850394 0.0107157810236218;0.334810921850394 0.0086607060236217;0.335442416850394 0.00662126602362171;0.336019321850394 0.00460117102362175;0.336539516850394 0.00260439602362175;0.336995051850394 0.000633591023621698;0.337388311850394 -0.00130859397637823;0.337711876850394 -0.0032187139763783;0.337965481850394 -0.00509411897637826;0.338146741850394 -0.00693030397637829;0.338252741850394 -0.00872382397637825;0.338276061850394 -0.0104733539763783;0.338219086850394 -0.0121741239763782;0.338076781850394 -0.0138224239763783;0.337846496850394 -0.0154182539763783;0.337522931850394 -0.0169541939763783;0.337106351850394 -0.0184294489763782;0.336593841850394 -0.0198397789763783;0.335980631850394 -0.0211833289763783;0.335261156850394 -0.0224563889763783;0.334438331850394 -0.0236549839763783;0.333503941850394 -0.0247754039763782;0.332455866850394 -0.0258160589763783;0.331296491850394 -0.0267735039763783;0.330015481850394 -0.0276432339763782;0.328615486850394 -0.0284249839763783;0.327088556850394 -0.0291108039763783;0.325437606850394 -0.0297006939763783;0.323654421850394 -0.0301925339763783;0.321736881850394 -0.0305810239763783;0.319684721850394 -0.0308629839763782;0.317492641850394 -0.0310339089763783;0.315158521850394 -0.0310959189763783;0.312679181850394 -0.0310389439763783;0.310049851850394 -0.0308629839763782];

  case 'square'
    % generate a square outline
    
    if isstruct(layout)

      % get index of all relevant channels
      ind1 = strcmp(layout.label,'COMNT');
      ind2 = strcmp(layout.label,'SCALE');
      ind  = ~(ind1 | ind2);

      x = layout.pos(ind,1);
      y = layout.pos(ind,2);
      w = layout.width(ind);
      h = layout.height(ind);
    else
      x = layout(:,1);
      y = layout(:,2);
      w = 0.02.*(max(x) - min(x));
      h = 0.02.*(max(y) - min(y));
    end

    % determine the bounding box and add a little space around it
    space = min(mean(w), mean(h))/4;
    xmin = min(x - 0.5*w - space);
    xmax = max(x + 0.5*w + space);
    ymin = min(y - 0.5*h - space);
    ymax = max(y + 0.5*h + space);

    % construct the outline
    outline = {[
      xmin ymax
      xmax ymax
      xmax ymin
      xmin ymin
      xmin ymax
      ]};

  case 'convex'
    % generate an outline from the boundary/convex hull of pos+width/height
    
    if isstruct(layout)

      % get index of all relevant channels
      ind1 = strcmp(layout.label,'COMNT');
      ind2 = strcmp(layout.label,'SCALE');
      ind  = ~(ind1 | ind2);

      x = layout.pos(ind,1);
      y = layout.pos(ind,2);
      w = layout.width(ind);
      h = layout.height(ind);
    else
      x = layout(:,1);
      y = layout(:,2);
      w = 0.02.*(max(x) - min(x));
      h = 0.02.*(max(y) - min(y));
    end

    % get position of all channel 'boxes' and draw boundary around it, or, in older matlabs, a convex hull
    boxpos = [
      x - (w/2) y - (h/2);  % lb
      x - (w/2) y + (h/2);  % lt
      x + (w/2) y - (h/2);  % rb
      x + (w/2) y + (h/2);  % rt
      ];
    if ft_platform_supports('boundary')
      k = boundary(boxpos,.2);
      outline{1} = boxpos(k,:);
    else
      outline{1} = boxpos(convhull(boxpos(:,1),boxpos(:,2)),:);
    end

  otherwise
    ft_error('unknown outline method');
end
